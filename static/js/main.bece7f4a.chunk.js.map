{"version":3,"sources":["store.js","components/Text.js","components/CustomMaterial.js","blocks.js","components/Plane.js","index.js"],"names":["state","sections","pages","zoom","paragraphs","offset","factor","header","image","aspect","text","top","createRef","Text","children","size","left","right","bottom","color","opacity","height","layers","font","props","data","useLoader","FontLoader","geom","usePromise","Promise","res","TextBufferGeometry","curveSegments","onUpdate","useCallback","self","box","Vector3","geometry","computeBoundingBox","boundingBox","getSize","position","x","y","ref","useRef","last","current","useFrame","shift","lerp","scale","frustumCulled","attach","transparent","MultilineText","lineHeight","split","map","index","key","CustomMaterial","vertexShader","fragmentShader","uniforms","texture","value","hasTexture","Color","this","ShaderMaterial","extend","offsetContext","createContext","Block","useBlock","parentOffset","sectionHeight","undefined","curY","curTop","Provider","useThree","viewport","useContext","viewportWidth","width","viewportHeight","canvasWidth","canvasHeight","mobile","margin","contentMaxWidth","offsetFactor","Plane","forwardRef","args","material","Startup","Paragraph","w","alignRight","pixelWidth","style","textAlign","tabIndex","Content","images","TextureLoader","useMemo","forEach","minFilter","LinearFilter","className","App","scrollArea","onScroll","e","target","scrollTop","useEffect","concurrent","pixelRatio","orthographic","camera","fallback","center","Array","fill","_","id","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bece7f4a.chunk.js","sourcesContent":["import { createRef } from \"react\"\n\nconst state = {\n  sections: 9,\n  pages: 8,\n  zoom: 75,\n  paragraphs: [\n    {\n      offset: 1,\n      factor: 1.75,\n      header: \"Meet My Love\",\n      image: \"/darshi.jpg\",\n      aspect: 1.51,\n      text:\n        \"26th Oct, 2019! the historic date as one would say - mausam bhi tha diwali bhi market saja hua tha aur uske beech ati hain ye ufff.... mtatlab kamaal si lagti hui aur mai ladkada gaya! loving everything about you baby\"\n    },\n    {\n      offset: 2,\n      factor: 2.0,\n      header: \"When we met\",\n      image: \"/us1.jpg\",\n      aspect: 1.5,\n      text:\n        \"Pagli si pyaari si bilkul jaisa chaha tum usse bhi nyaari thi.Tumse sukoon tha tumhare age to poori jagg hari thi. sorry but bear my poems plz . Not just today or tomorrow but every single day.\"\n    },\n    {\n      offset: 3,\n      factor: 2.25,\n      header: \"Bunk/Date\",\n      image: \"/us2.jpg\",\n      aspect: 1.5037,\n      text: \"You manage to look good in every photo thats cheating mai badi mehnat se kuch gandi photo doondh ra hahahahahaa lub yo.\"\n    },\n    {\n      offset: 4,\n      factor: 2.0,\n      header: \"Romantic\",\n      image: \"/rom.jpg\",\n      aspect: 0.665,\n      text: \"Romance ka mauka nahi chorte hum ahmm ahmmm.!\"\n    },\n    {\n      offset: 5,\n      factor: 1.75,\n      header: \"Tastyyy\",\n      image: \"/us3.jpg\",\n      aspect: 1.55,\n      text: \"our tasty dates , i miss them a lottt now!\"\n    },\n    { offset: 7, factor: 1.05, header: \"Most importantly\", image: \"/most.jpg\", aspect: 1.77, text: \"I have you. Reminder - Eat healthy\" }\n  ],\n\n  top: createRef()\n}\n\nexport default state\n","import { FontLoader, Vector3, TextBufferGeometry } from \"three\"\nimport React, { useCallback, useRef } from \"react\"\nimport { useLoader, useFrame } from \"react-three-fiber\"\nimport usePromise from \"react-promise-suspense\"\nimport lerp from \"lerp\"\nimport state from \"../store\"\n\nfunction Text({ children, size = 1, left, right, top, bottom, color = \"white\", opacity = 1, height = 0.01, layers = 0, font = \"/MOONGET_Heavy.blob\", ...props }) {\n  const data = useLoader(FontLoader, font)\n  const geom = usePromise(() => new Promise((res) => res(new TextBufferGeometry(children, { font: data, size: 1, height, curveSegments: 32 }))), [children])\n  const onUpdate = useCallback(\n    (self) => {\n      const box = new Vector3()\n      self.geometry.computeBoundingBox()\n      self.geometry.boundingBox.getSize(box)\n      self.position.x = left ? 0 : right ? -box.x : -box.x / 2\n      self.position.y = top ? 0 : bottom ? -box.y : -box.y / 2\n    },\n    [left, right, top, bottom]\n  )\n\n  const ref = useRef()\n  let last = state.top.current\n  useFrame(() => {\n    ref.current.shift = lerp(ref.current.shift, (state.top.current - last) / 100, 0.1)\n    last = state.top.current\n  })\n\n  return (\n    <group {...props} scale={[size, size, 0.1]}>\n      <mesh geometry={geom} onUpdate={onUpdate} frustumCulled={false}>\n        <customMaterial ref={ref} attach=\"material\" color={color} transparent opacity={opacity} />\n      </mesh>\n    </group>\n  )\n}\n\nconst MultilineText = ({ text, size = 1, lineHeight = 1, position = [0, 0, 0], ...props }) =>\n  text.split(\"\\n\").map((text, index) => <Text key={index} size={size} {...props} position={[position[0], position[1] - index * lineHeight, position[2]]} children={text} />)\n\nexport { Text, MultilineText }\n","import { ShaderMaterial, Color } from \"three\"\nimport { extend } from \"react-three-fiber\"\n\nclass CustomMaterial extends ShaderMaterial {\n  constructor() {\n    super({\n      vertexShader: `uniform float scale;\n      uniform float shift;\n      varying vec2 vUv;\n      void main() {\n        vec3 pos = position;\n        pos.y = pos.y + ((sin(uv.x * 3.1415926535897932384626433832795) * shift * 2.0) * 0.125);\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos,1.);\n      }`,\n      fragmentShader: `uniform sampler2D texture;\n      uniform float hasTexture;\n      uniform float shift;\n      uniform float scale;\n      uniform vec3 color;\n      uniform float opacity;\n      varying vec2 vUv;\n      void main() {\n        float angle = 1.55;\n        vec2 p = (vUv - vec2(0.5, 0.5)) * (1.0 - scale) + vec2(0.5, 0.5);\n        vec2 offset = shift / 4.0 * vec2(cos(angle), sin(angle));\n        vec4 cr = texture2D(texture, p + offset);\n        vec4 cga = texture2D(texture, p);\n        vec4 cb = texture2D(texture, p - offset);\n        if (hasTexture == 1.0) gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n        else gl_FragColor = vec4(color, opacity);\n      }`,\n      uniforms: {\n        texture: { value: null },\n        hasTexture: { value: 0 },\n        scale: { value: 0 },\n        shift: { value: 0 },\n        opacity: { value: 1 },\n        color: { value: new Color(\"white\") }\n      }\n    })\n  }\n\n  set scale(value) {\n    this.uniforms.scale.value = value\n  }\n\n  get scale() {\n    return this.uniforms.scale.value\n  }\n\n  set shift(value) {\n    this.uniforms.shift.value = value\n  }\n\n  get shift() {\n    return this.uniforms.shift.value\n  }\n\n  set map(value) {\n    this.uniforms.hasTexture.value = !!value\n    this.uniforms.texture.value = value\n  }\n\n  get map() {\n    return this.uniforms.texture.value\n  }\n\n  get color() {\n    return this.uniforms.color.value\n  }\n\n  get opacity() {\n    return this.uniforms.opacity.value\n  }\n\n  set opacity(value) {\n    if (this.uniforms) this.uniforms.opacity.value = value\n  }\n}\n\nextend({ CustomMaterial })\n","import React, { createContext, useRef, useContext } from \"react\"\nimport { useFrame, useThree } from \"react-three-fiber\"\nimport lerp from \"lerp\"\nimport state from \"./store\"\n\nconst offsetContext = createContext(0)\n\nfunction Block({ children, offset, factor, ...props }) {\n  const { offset: parentOffset, sectionHeight } = useBlock()\n  const ref = useRef()\n  offset = offset !== undefined ? offset : parentOffset\n  useFrame(() => {\n    const curY = ref.current.position.y\n    const curTop = state.top.current\n    ref.current.position.y = lerp(curY, (curTop / state.zoom) * factor, 0.1)\n  })\n  return (\n    <offsetContext.Provider value={offset}>\n      <group {...props} position={[0, -sectionHeight * offset * factor, 0]}>\n        <group ref={ref}>{children}</group>\n      </group>\n    </offsetContext.Provider>\n  )\n}\n\nfunction useBlock() {\n  const { sections, pages, zoom } = state\n  const { size, viewport } = useThree()\n  const offset = useContext(offsetContext)\n  const viewportWidth = viewport.width\n  const viewportHeight = viewport.height\n  const canvasWidth = viewportWidth / zoom\n  const canvasHeight = viewportHeight / zoom\n  const mobile = size.width < 700\n  const margin = canvasWidth * (mobile ? 0.2 : 0.1)\n  const contentMaxWidth = canvasWidth * (mobile ? 0.8 : 0.6)\n  const sectionHeight = canvasHeight * ((pages - 1) / (sections - 1))\n  const offsetFactor = (offset + 1.0) / sections\n  return {\n    viewport,\n    offset,\n    viewportWidth,\n    viewportHeight,\n    canvasWidth,\n    canvasHeight,\n    mobile,\n    margin,\n    contentMaxWidth,\n    sectionHeight,\n    offsetFactor\n  }\n}\n\nexport { Block, useBlock }\n","import React, { forwardRef, useRef } from \"react\"\nimport { useFrame } from \"react-three-fiber\"\nimport lerp from \"lerp\"\nimport \"./CustomMaterial\"\nimport { useBlock } from \"../blocks\"\nimport state from \"../store\"\n\nconst Plane = forwardRef(({ color = \"white\", shift = 1, opacity = 1, args, map, ...props }, ref) => {\n  const { viewportHeight, offsetFactor } = useBlock()\n  const material = useRef()\n  let last = state.top.current\n  useFrame(() => {\n    const { pages, top } = state\n    material.current.scale = lerp(material.current.scale, offsetFactor - top.current / ((pages - 1) * viewportHeight), 0.1)\n    material.current.shift = lerp(material.current.shift, (top.current - last) / shift, 0.1)\n    last = top.current\n  })\n  return (\n    <mesh ref={ref} {...props}>\n      <planeBufferGeometry attach=\"geometry\" args={args} />\n      <customMaterial ref={material} attach=\"material\" color={color} map={map} transparent opacity={opacity} />\n    </mesh>\n  )\n})\n\nexport default Plane\n","import ReactDOM from \"react-dom\"\nimport React, { Suspense, useEffect, useRef, useMemo } from \"react\"\nimport { Canvas, Dom, useLoader, useFrame } from \"react-three-fiber\"\nimport { TextureLoader, LinearFilter } from \"three\"\nimport lerp from \"lerp\"\nimport { Text, MultilineText } from \"./components/Text\"\n\nimport Plane from \"./components/Plane\"\nimport { Block, useBlock } from \"./blocks\"\nimport state from \"./store\"\nimport \"./styles.css\"\n\nfunction Startup() {\n  const ref = useRef()\n  useFrame(() => (ref.current.material.opacity = lerp(ref.current.material.opacity, 0, 0.025)))\n  return <Plane ref={ref} color=\"#0e0e0f\" position={[0, 0, 200]} scale={[100, 100, 1]} />\n}\n\nfunction Paragraph({ image, index, offset, factor, header, aspect, text }) {\n  const { contentMaxWidth: w, canvasWidth, margin, mobile } = useBlock()\n  const size = aspect < 1 && !mobile ? 0.65 : 1\n  const alignRight = (canvasWidth - w * size - margin) / 2\n  const pixelWidth = w * state.zoom * size\n  const left = !(index % 2)\n  const color = index % 2 ? \"#D40749\" : \"#2FE8C3\"\n  return (\n    <Block factor={factor} offset={offset}>\n      <group position={[left ? -alignRight : alignRight, 0, 0]}>\n        <Plane map={image} args={[1, 1, 32, 32]} shift={75} size={size} aspect={aspect} scale={[w * size, (w * size) / aspect, 1]} frustumCulled={false} />\n        <Dom\n          style={{ width: pixelWidth / (mobile ? 1 : 2), textAlign: left ? \"left\" : \"right\" }}\n          position={[left || mobile ? (-w * size) / 2 : 0, (-w * size) / 2 / aspect - 0.4, 1]}>\n          <div tabIndex={index}>{text}</div>\n        </Dom>\n        <Text left={left} right={!left} size={w * 0.04} color={color} top position={[((left ? -w : w) * size) / 2, (w * size) / aspect / 2 + 0.5, -1]}>\n          {header}\n        </Text>\n        <Block factor={0.2}>\n          <Text opacity={0.5} size={w * 0.1} color=\"#1A1E2A\" position={[((left ? w : -w) / 2) * size, (w * size) / aspect / 1.5, -10]}>\n            {\"0\" + (index + 1)}\n          </Text>\n        </Block>\n      </group>\n    </Block>\n  )\n}\n\nfunction Content() {\n  const images = useLoader(\n    TextureLoader,\n    state.paragraphs.map(({ image }) => image)\n  )\n  useMemo(() => images.forEach((texture) => (texture.minFilter = LinearFilter)), [images])\n  const { contentMaxWidth: w, canvasWidth, canvasHeight, mobile } = useBlock()\n  return (\n    <>\n      <Block factor={1} offset={0}>\n        <Block factor={1.2}>\n          <Text left size={w * 0.08} position={[-w / 3.2, 0.5, -1]} color=\"#d40749\">\n            Love Letter\n          </Text>\n        </Block>\n        <Block factor={0.8}>\n          <Dom position={[-w / 3.2, -w * 0.08 + 0.25, -1]}>wanted to say something.....{mobile ? <br /> : \" \"}mere pyaar ka paigaam</Dom>\n        </Block>\n      </Block>\n      <Block factor={1.2} offset={5.8}>\n        <MultilineText top left size={w * 0.15} lineHeight={w / 5} position={[-w / 3.5, 0, -1]} color=\"#d40749\" text={\"   I\\nLove\\n you\"} />\n      </Block>\n      {state.paragraphs.map((props, index) => (\n        <Paragraph key={index} index={index} {...props} image={images[index]} />\n      ))}\n\n      <Block factor={1.25} offset={7.5}>\n        <Dom className=\"bottom-left\" position={[-canvasWidth / 2, -canvasHeight / 2, 0]}>\n          Yours lovingly\n        </Dom>\n      </Block>\n    </>\n  )\n}\n\nfunction App() {\n  const scrollArea = useRef()\n  const onScroll = (e) => (state.top.current = e.target.scrollTop)\n  useEffect(() => void onScroll({ target: scrollArea.current }), [])\n  return (\n    <>\n      <Canvas concurrent pixelRatio={1} orthographic camera={{ zoom: state.zoom, position: [0, 0, 500] }}>\n        <Suspense fallback={<Dom center className=\"loading\" children=\"Hey There just wait a sec I'm comming!\" />}>\n          <Content />\n\n          <Startup />\n        </Suspense>\n      </Canvas>\n      <div className=\"scrollArea\" ref={scrollArea} onScroll={onScroll}>\n        {new Array(state.sections).fill().map((_, index) => (\n          <div key={index} id={\"0\" + index} style={{ height: `${(state.pages / state.sections) * 100}vh` }} />\n        ))}\n      </div>\n    </>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"))\n"],"sourceRoot":""}